%! Author = zachprobst
%! Date = 2021-09-05

% Preamble
\documentclass[11pt]{article}

% Packages
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{mathtools}

% Setup
\title{Honours Analysis 3}
\author{Zachary Probst \thanks{Notes from the lectures of Valentino Tosatti}}
\setlength{\parindent}{0pt}
\setlength{\parskip}{\baselineskip}%
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\card}{\lvert}{\rvert}


\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}{Definition}[section]
\newtheorem*{remark}{Remark}

% Commands
\newcommand{\siga}{\sigma\text{-algebra}}
\newcommand{\pwr}[1]{\mathcal{P}(\mathbb{#1})}
\newcommand{\rinf}{\mathbb{R}_{\geq 0} \cup \{ + \infty \}}
\newcommand{\mstar}[1]{m^{\star}\left(#1\right)}
\newcommand{\isum}[1]{\sum_{#1=1}^{\infty}}

% Document
\begin{document}

    \maketitle


    \section{Borel Sets}\label{sec:borel-sets}

    We will work for some time on $\mathbb{R}$ exclusively.
    Before beginning Measure Theory: a quick recap of Topology.

    \begin{definition}[Open Set]
        A subset $U \subset \mathbb{R}$ is called \emph{open} if either $U = \emptyset$ or else
        \[
            \forall x \in U, \exists r > 0 \text{ such that } (x-r,x+r) \subset U
        \]
    \end{definition}

    Some examples of open sets: $\emptyset, \mathbb{R}, (a,b), (a,\infty), (-\infty, a)$.
    There are many more because any union of an open set is still open and any finite intersection of open sets is open.

    \begin{definition}[Closed Set]
        $F \subset \mathbb{R}$ is called \emph{closed} if $\mathbb{R} \setminus F \coloneqq F^c $ is open.

        $F$ is closed $\iff$ $F$ contains all points $x \in \mathbb{R}$ which have the property that $\forall r > 0, (x-r, x+r) \cap F \neq \emptyset$.
    \end{definition}

    If $F \subset \mathbb{R}$ is any set, the closure of $F$, denoted by $\overline{F}$, is the smallest closed set that contains $F$.

    \begin{definition}[Compact]
        A subset $G \subset \mathbb{R}$ is \emph{compact} if given any collection $\{ U_i \}_{i \in I}$ of open sets $U_i \subset \mathbb{R}$ with $G \subset \cup_{i \in I} U_i$, there exists $J \subset I$, $J$ finite, such that $G \subset \cup_{j \in J} U_j$
    \end{definition}

    \begin{theorem}[Heine-Borel]
        $G \subset \mathbb{R}$ is compact $\iff$ $G$ is closed and bounded.
        To be bounded means $G \subset (a,b)$ for some $a,b \in \mathbb{R}$.
    \end{theorem}

    \begin{corollary}[Nested Set Theorem]
        Let $\{ F_n \}_{n=1}^{\infty}$ be a countable collection of non-empty, bounded, closed sets $F_n \subset \mathbb{R}$ with $F_{n+1} \subset F_n \forall n$, then
        \[
            \cap_{n=1}^{\infty} F_n \neq \emptyset
        \]
    \end{corollary}

    \begin{proof}
        Suppose $\cap_{n=1}^{\infty} F_n = \emptyset$ so let $U_n = F_{n}^{c}$ be open sets, such that $\cup_{n=1}^{\infty} U_n = \mathbb{R}$.
        We also have that $U_n \subset U_{n+1}$, since the $F_n$ were nested.
        Now $F_1$ is compact by Heine-Borel and $F_1 \subset \cup_{n=1}^{\infty} U_n \Rightarrow $ by compactness
        I can find a finite subcover of $F_1$, say $F \subset \cup_{n=1}^{N} U_n = U_N = F_N ^{c}$

        On the other hand $F_N \subset F_1$ by the nested property which implies $F_N = \emptyset$ which is a contradiction.
    \end{proof}


    \section{Measure Theory}\label{sec:measure-theory}

    We want to measure the size of a set.
    We will deal with a subset of $\mathbb{R}$.

    It turns out that one needs to select a class of subsets of $\mathbb{R}$ that one wants to measure.
    This class of subsets will have certain properties which are as follows.

    \begin{definition}[$\siga$]
        A collection $\mathcal{A}$ of subsets of $\mathbb{R}$ is called a $\siga$ if it satisfies
        \begin{enumerate}
            \item $\emptyset \in \mathcal{A}$
            \item If $A \in \mathcal{A}$ then $A^c \in \mathcal{A}$
            \item If $\{ A_n \}_{n=1}^{\infty} \subset \mathcal{A}$ then $\cup_{n=1}^{\infty} A_n \in \mathcal{A}$
        \end{enumerate}
    \end{definition}

    Observe the following:
    \begin{itemize}
        \item $\mathbb{R} \in \mathcal{A}$ always
        \item If $\{ A_n \}_{n=1}^{N} \subset \mathcal{A}$ then $\cup_{n=1}^{N} A_n \in \mathcal{A}$ (just define $A_n = \emptyset$ for $n > N$)
        \item If $\{ A_n \}_{n=1}^{\infty} \subset \mathcal{A}$ then $\cap_{n=1}^{\infty} A_n \in \mathcal{A}$ (since $(\cap_{n=1}^{\infty} A_n)^c = \cup_{n=1}^{\infty} A_{n}^{c}$)
        \item If $A,B \in \mathcal{A}$ then $A \setminus B \in \mathcal{A}$ too since $A \setminus B = A \cap B^c$
    \end{itemize}

    \underline{\textbf{Examples}:}

    \begin{enumerate}
        \item $\mathcal{A} = \{ \emptyset, \mathbb{R} \}$ ``Minimal $\siga$''
        \item $\mathcal{A} = \mathcal{P}(\mathbb{R}) = $ Collection of all subsets of $\mathbb{R}$.
        ``Maximum $\siga$''
    \end{enumerate}

    In fact, if $\mathcal{A}$ is any $\siga$, then $\{ \emptyset,\mathbb{R} \} \subseteq \mathcal{A} \subseteq \mathcal{P}(\mathbb{R})$

    For better examples, let $F$ be any collection of subsets of $\mathbb{R}$.
    I want to make $F$ into a $\siga$.
    Define $m = \{ \mathcal{A} \mid \mathcal{A} \text{ is a } \siga \text{ that satisfies } F \subset \mathcal{A} \}$.
    $m \neq \emptyset$ since it contains $\mathcal{P}(\mathbb{R})$

    If $\mathcal{A}, \mathcal{B} \in m$, I can define $\mathcal{A} \cap \mathcal{B} = \{ A \subset \mathbb{R} \mid A \in \mathcal{A} \text{ and } A \in \mathcal{B} \}$ and I can do the same for $\cap_{i \in I} \mathcal{A}$ arbitrary intersection of $\siga$ is still a $\siga$

    Define $\hat{F_i} = \cap_{\mathcal{A} \in m} \mathcal{A}$ as a $\siga$ and $F \subset \hat{F}$ and it is the minimal $\siga$ with these properties.
    If $G$ is a $\siga$ with $F \subset G$, then $\hat{F} \subset G$.
    $\hat{F}$ is the $\siga$ generated by $F$.
    Concretely, $\hat{F}$ consists of all subsets of $\mathbb{R}$ that can be constructed by applying countable unions, intersections, and complements to elements of $F$.

    \begin{definition}[Borel Sets]
        The $\siga \; \mathcal{B}$ of Borel Sets is the $\siga \; \hat{F}$ generated by
        \[
            F = \{ U \subset \mathbb{R} \mid U \text{ open } \}
        \]
    \end{definition}

    \begin{remark}
        $\mathcal{B}$ is also the $\siga$ generated by the family of all closed subsets of $\mathbb{R}$
    \end{remark}

    Singletons $\{ x \} \subset \mathbb{R}$ are closed so if $A \subset \mathbb{R}$ is at most countable then $A$ is Borel.
    (e.g $\mathbb{Q} \subset \mathbb{R}$) (e.g $\mathbb{R} \setminus \mathbb{Q}$)

    Not all Subsets of $\mathbb{R}$ are Borel.
    One can actually show that the cardinality of $\mathcal{B}$ is the same as the cardinality of $\mathbb{R}$.
    On the other hand $\mathcal{P}(\mathbb{R})$ has strictly larger cardinality.


    \section{Lebesgue Outer Measure}\label{sec:legesgue-outer-measure}

    We are hoping to measure the size of subsets of $\mathbb{R}$.
    Ideally we would like to find or construct a function
    \[
        m: \pwr{R} \rightarrow \mathbb{R}_{\geq 0} \cup \{ + \infty \} = [0, \infty]
    \]
    Which satisfies the following measure requirements:
    \begin{enumerate}
        \item If $I=[a,b]$ or $(a,b)$ or $[a,b)$, or $(a,b]$, $a,b \in \mathbb{R}, a \leq b$ then $m(I) = b-a = $ measure of interval
        \item $m$ is translation invariant.
        i.e if $E \subset \mathbb{R}$ and $x \in \mathbb{R}$, let $E + x = \{ y+x \mid y \in E \}$ then $m(E+x)$ = m(E)
        \item If $\{ E_j \}_{j=1}^{n}$ is a finite collection of pairwise disjoint $E_j \subset \mathbb{R}$ then
        \[
            m \left( \cup_{j=1}^{n} E_j \right) = \sum_{j=1}^{n} m(E_j)
        \]
        \item The same as (3) except for $n = \infty$
    \end{enumerate}

    \begin{theorem}
        There is no such $m$ satisfying all 4 requirements
    \end{theorem}

    The proof for this will come later.
    The solution for this is that we do not try to measure all subsets of $\mathbb{R}$.
    So we have $m: \pwr{R} \rightarrow [0, \infty]$ but now we will just be happy with $m: \mathcal{A} \rightarrow [0,\infty]$ where $\mathcal{A}$ is a $\siga$ which has enough elements.
    For example $\mathcal{A} > \mathcal{B}$.

    We will follow H. Lebesgue as we proceed in two steps.

    \underline{Step 1:} construct Lebesgue outer measure $m^{\star}: \pwr{R} \rightarrow [0, \infty]$ satisfying requirements 1,2, and 3.

    \underline{Step 2:} Use $m^{\star}$ to define $\mathcal{A}$ and let $m \subset m^{\star} \mid \mathcal{A}$

    To create this Lebesgue outer measure on $\mathbb{R}$ we satisfy a weakened version of requirement (3) that can be called (3w).
    For any countably infinite collection $\{ E_j \}_{j=1}^{\infty}$ of arbitrary subsets $E_j \subset \mathbb{R}$
    \[
        m^{\star}(\cup_{j=1}^{\infty} E_j) \leq \sum_{j=1}^{\infty} m(E_j)
    \]
    \begin{theorem}[Lebesgue Outer Measure]
        There is a map $m^{\star}: \pwr{R} \rightarrow \rinf $ that satisfies the measure requirements 1, 2, and 3w.
    \end{theorem}

    This $m^{\star}$ is called the Lebesgue outer measure on $\mathbb{R}$.

    How do we define outer measure $m^{\star}(A)$?

    Observe that any $A \subseteq \mathbb{R}$ can be covered by some countable infinite collection $\{ I_j \}_{j=1}^{\infty}$ of bounded open intervals, which are allowed to be empty, but we do not assume that $I_j$ be pairwise disjoint.

    For example: $I_j = (-j, j), \; j=1,2,3\hdots$

    Let
    \[
        \mathcal{C}_A = \{ \{I_j\}_{j=1}^{\infty} \mid I_j \text{ bounded open intervals such that } A \subset \cup_{j=1}^{\infty} I_j \}
    \]
    $\mathcal{C}_A \neq \emptyset$ by our example so for each $\{ I_j \} \in \mathcal{C}_A$, I can consider
    \[
        \sum_{j=1}^{\infty} \ell(I_j) \in \rinf \tag{$\ell$ denotes length}
    \]

    \begin{definition}[Outer Measure]
        \[
            \boxed{m^{\star}(A) \coloneqq \inf_{\{ I_j \} \in \mathcal{C_A}} \sum_{j=1}^{\infty} \ell (I_j)  } \in \rinf
        \]
    \end{definition}

    This defines a map $m^{\star}: \pwr{R} \rightarrow \rinf$

    \underline{Simple Properties:}

    \begin{itemize}
        \item \emph{Monotonicity}:
        If $A \subseteq B$ then $m^{\star}(A) \leq m^{\star}(B)$.
        Indeed by definition $\mathcal{C}_B \subseteq \mathcal{C}_A$ hence the infimum over $\mathcal{C}_B$ is $\geq$ than the infimum over $\mathcal{C}_A$.
        \item \emph{Empty Set}: $\mstar{\emptyset} = 0$.
        Given any $1 > \epsilon > 0$, let $I_j = (-\epsilon^{j}, \epsilon^j), \; j=1,2,\hdots$
        $\{I_j\} \in \mathcal{C}_{\emptyset}$ and $\sum_{j=1}^{\infty} \ell (I_j) = 2 \sum_{j=1}^{\infty} \epsilon^j = \frac{2\epsilon}{1-\epsilon} $ from the geometric series going to zero so $\mstar{\emptyset} \leq \frac{2\epsilon}{1-\epsilon} \; \forall 0 < \epsilon < 1$
        \item If $A \in \mathbb{R}$ is finite or countable infinite then $\mstar{A} = 0$.
        Indeed enumerate all elements of $A$ by $\{ a_j \}_{j=1}^{\infty}$.
        (If $A$ is finite say $\card{A} = n$ let $a_j = a_n$ for all $j > n$).
        For any $0 < \epsilon < 1$, let $I_j = \left( -\epsilon^j + a_j, a_j + \epsilon^j \right)$ so $A \subseteq \cup_{j=1}^{\infty} I_j$ and $\isum{j} \ell (I_j) = \frac{2\epsilon}{1-\epsilon}$ hence as before, $\mstar{A} = 0$.
        For example $\mstar{\mathbb{Q}} = 0$
    \end{itemize}

    We will now prove that the Lebesgue outer measure satisfies 1, 2, and 3w of the measure requirements.

    \underline{Proof of Property 1}:
    i.e $\mstar{I} = \ell(I)$ for any interval $I \subseteq \mathbb{R}$

    Assume that $I = [a,b]$, $a < b$ are finite numbers.
    Assume that $I$ is a bounded closed interval.
    Our goal is to show that $\mstar{I} = b -a$.
    One direction of inequality is easy to prove, the other is quite tedious and will be left out.

    For any $\epsilon > 0$ let $I_1 = (a-\epsilon, b + \epsilon) > I$, let $I_j = \emptyset, j \geq 2$ so $\{I_j \} \in \mathcal{C}_I \Rightarrow \mstar{I} \leq \isum{j} \ell (I_j) = b - a + 2 \epsilon$.
    Let $\epsilon \rightarrow 0$ and we obtain $\mstar{I} \leq b-a$.

    \underline{Proof of Property 2}:
    i.e $\forall A \subset \mathbb{R}, \forall x \in \mathbb{R}$, $\mstar{A+x} = \mstar{A}$

    $\mathcal{C}_A$ and $\mathcal{C}_{A+x}$ are naturally in bijection via $\{ I_j \} \leftrightarrow \{ I_j + x \}$.
    Furthermore $\ell (I_j + x) = \ell (I_j)$
    \begin{align*}
        \mstar{A+x} &= \inf_{\{I_j +x\} \in \mathcal{C}_{A+x}} \isum{j} \ell (I_j + x) \\
        &= \inf_{\{I_j\} \in \mathcal{C}_{A}} \isum{j} \ell (I_j) = \mstar{A}
    \end{align*}

    \underline{Proof of Property 3w}:
    i.e If $\{ E_j \}_{j=1}^{n}$ is a finite collection of pairwise disjoint $E_j \subset \mathbb{R}$ then $\mstar{\cup_{j=1}^{n} E_j} = \sum_{j=1}^{n} \mstar{E_j}$

    If $\mstar{E_j} = +\infty$ for some $j$, then the property holds.
    We may assume that $\mstar{E_j} < + \infty \; \forall j$.
    Let $\epsilon > 0$.
    By the definition of infimum, for each $j \geq 0$, there is
    \[
        \{ I_{j,k} \}_{k=1}^{\infty} \in \mathcal{C}_{E_j} \text{ such that } \isum{k} \ell (I_{j,k}) < \mstar{E_j} + \epsilon 2^{-j}
    \]
    Thus $\{ I_{j,k} \}_{k=1}^{\infty}$ is still countable and it covers $\cup_{j=1}^{\infty} E_j$ meaning it belongs to $\mathcal{C}_{\cup_{j=1}^{\infty}} E_j$, so by definition
    \[
       \mstar{\bigcup_{j=1}^{\infty} E_j} \leq \sum_{j=1}^{\infty} \isum{k} \ell (I_{j,k}) < \sum_{j=1}^{\infty} (\mstar{E_j} + \epsilon 2^{-j}) = \sum_{j=1}^{\infty} \mstar{E_j} + \epsilon
    \]
    Then let $\epsilon \rightarrow 0$.
    Clearly, by taking all $E_j = \emptyset$ except finitely many, we have the same subadditivity 3w for finite collections.

    \begin{corollary}
        $\mstar{[0,1] \cap (\mathbb{R} \setminus \mathbb{Q})} = 1 = \ell([0,1])$
    \end{corollary}
    \begin{proof}
        \begin{align*}
            \mstar{[0,1] \cap (\mathbb{R} \setminus \mathbb{Q})} &\leq \mstar{[0,1]} = 1 \\
            &\leq \mstar{[0,1] \cap (\mathbb{Q})} + \mstar{[0,1] \cap (\mathbb{R} \setminus \mathbb{Q})} \\
            &\leq 0 + 1
        \end{align*}
    \end{proof}

    \begin{corollary}
        $\mathbb{R} \setminus \mathbb{Q}$ is uncountable
    \end{corollary}
    \begin{proof}
        If not, then
        \[
            \mstar{\mathbb{R} \setminus \mathbb{Q}} = 0 \geq \mstar{[0,1] \cap (\mathbb{R} \setminus \mathbb{Q})} = 1 \qedhere
        \]
    \end{proof}

    \section{The $\sigma$-Algebra Of Lebesgue Measurable Sets}\label{sec:the-$sigma$-algebra-of-lebesgue-measurable-sets}

    $m^{\star}$ does not satisfy the third measurability requirement without the weak 3w condition.
    We can construct some examples to prove this.
    $A, B \subset \mathbb{R}, A \cap B = \emptyset$, such that $\mstar{A \cup B} < \mstar{A} + \mstar{B}$ later in the class.

    The idea to avoid this problem is to look at ``reasonable'' subsets of $\mathbb{R}$ for which this paradox disappears.

    \begin{definition}[Carath\'eodory]
        $E \subseteq R$ is called (Lebesgue) measurable if $\forall A \subset \mathbb{R}$
        \[
            \mstar{A} = \mstar{A \cap E} + \mstar{A \cap E^c}
        \]
    \end{definition}
    \begin{remark}
        This is equivalent to Lebesgue's definition: $E$ is measurable if and only if
        \[
            \exists U \subset \mathbb{R} \text{ such that } E \subset U \text{ and } \mstar{u \setminus E} < \epsilon
        \]
        But we will discuss this later.
    \end{remark}



\end{document}